<!DOCTYPE html>
<html lang="en"> <!-- Defines the language of the document -->

<head>
    <meta charset="UTF-8"> <!-- Specifies the character encoding -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Ensures responsive design -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- Ensures compatibility with Internet Explorer -->

    <title>Search Results || Book Haven</title> <!-- Title of the webpage that appears in the browser tab -->

    <!-- Favicon -->
    <link rel="icon" href="/assets/image/Logo/favicon.ico" type="image/png" style="border-radius: 50%;">
    
    <!-- font icon link -->
    <link href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css" rel="stylesheet">

    <!-- External CSS Link -->
    <link rel="stylesheet" href="style.css"> <!-- Link to external CSS file -->
    <link rel="stylesheet" href="/src/css/navber.css"> <!-- Link to external CSS file -->
    <link rel="stylesheet" href="/src/css/loding.css"> <!-- Link to external CSS file -->
    <link rel="stylesheet" href="/src/css/books.css"> <!-- Link to external CSS file -->

</head>

<body style="margin: 0; box-sizing: 0;">

    <!-- Header Section -->
    <header class="header" id="header">
      <nav class="navbar container">
          <a href="/" class="brand"> <img class="logo" src="/assets/image/Logo/Book-Haven-Icon.png" alt=""
                  style="width: 150px;"></a>
          <div class="search">
              <form id="search-form" class="search-form">
                  <input id="search-input" type="text" name="search" class="search-input"
                      placeholder="Search books..." autofocus>
                  <button type="submit" class="search-submit"><i class="bx bx-search"></i></button>
              </form>
          </div>

          <div class="menu" id="menu">
              <ul class="menu-inner">
                  <li class="menu-item"><a href="/" class="menu-link">Home</a></li>
                  <li class="menu-item"><a href="/books.html" class="menu-link">Books</a></li>
                  <li class="menu-item"><a href="/wishlist.html" class="menu-link">Wishlist</a></li>
              </ul>
          </div>
          <div class="burger" id="burger">
              <span class="burger-line"></span>
              <span class="burger-line"></span>
              <span class="burger-line"></span>
          </div>
      </nav>
  </header>

    <div style="margin-top: 100px;" class="container">
        <!-- Loader -->
        <div id="loader">
            <div class="devLoader">
                <div class="loader"> </div>
            </div>
        </div>
        <!-- Books  -->
        <div id="search-results"></div>


        <div class="paginationAlignment">
            <div id="pagination-container" style="display: none;">
                <button id="prev-page" class="pagination-btn" disabled>Previous</button>
                <span id="current-page">1</span>
                <button id="next-page" class="pagination-btn">Next</button>
            </div>
        </div>
    </div>

    <script>
        // URL থেকে সার্চ কুয়েরি নেওয়া
        const urlParams = new URLSearchParams(window.location.search);
        const searchQuery = urlParams.get('query');
    
        // সার্চ রেজাল্ট ফেচ করা
        async function fetchSearchResults(query) {
          try {
            const response = await fetch(`https://gutendex.com/books/?search=${query}`);
            const data = await response.json();
    
            displaySearchResults(data.results);
          } catch (error) {
            console.error('Error fetching search results:', error);
          }
        }
    
        // সার্চ রেজাল্ট দেখানো
        function displaySearchResults(books) {
          const resultsDiv = document.getElementById("search-results");
          resultsDiv.innerHTML = '';
    
          if (books.length === 0) {
            resultsDiv.innerHTML = `<p>No results found for "${searchQuery}"</p>`;
          } else {
            books.forEach((book) => {
              const bookItem = document.createElement("div");
              bookItem.innerHTML = `
                <h3>${book.title}</h3>
                <p>Author: ${book.authors[0]?.name || 'Unknown'}</p>
              `;
              resultsDiv.appendChild(bookItem);
            });
          }
        }
    
        // সার্চ কুয়েরি থাকলে ফেচ করা শুরু করা
        if (searchQuery) {
          fetchSearchResults(searchQuery);
        }
      </script>

    <script type="module" src="scripts.js" defer></script>
    <script type="module" src="/src/utils/displayBooks.js" defer></script>
    <!-- <script src="./src/pages/WishListPage.js"></script> -->
</body>

</html>